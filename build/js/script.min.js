const headerToggle=document.querySelector(".header__toggle"),headerNavList=document.querySelector(".header__nav-list");headerToggle.classList.remove("visually-hidden"),headerNavList.classList.add("header__nav-list--closed"),headerToggle.addEventListener("click",function(e){e.preventDefault(),headerToggle.classList.toggle("header__toggle--closed"),headerNavList.classList.toggle("header__nav-list--closed")}),document.addEventListener("click",e=>{var t=e.composedPath().includes(headerNavList),e=e.composedPath().includes(headerToggle);t||e||(headerNavList.classList.add("header__nav-list--closed"),headerToggle.classList.remove("header__toggle--closed"))});const modalCTA=document.querySelector(".page__modal-call-to-action"),buttonCTA=document.querySelector(".call-to-action__button"),toggleCTA=document.querySelector(".modal-call-to-action__toggle-box, .modal-call-to-action__toggle");buttonCTA.addEventListener("click",function(e){e.preventDefault(),modalCTA.classList.remove("visually-hidden")}),toggleCTA.addEventListener("click",function(e){e.preventDefault(),modalCTA.classList.add("visually-hidden")}),document.addEventListener("DOMContentLoaded",function(){const s=document.querySelector(".modal-call-to-action__form");function d(e){e.classList.add("item-radio__input-field--error")}s.addEventListener("submit",async function(t){t.preventDefault();var e=function(){let t=0,a=document.querySelectorAll(".item-radio__input-field");for(let e=0;e<a.length;e++){const o=a[e];o.classList.remove("item-radio__input-field--error"),o.classList.contains("__email")?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(o.value)||(d(o),t++):o.classList.contains("__phone")?/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(o.value)||(d(o),t++):o.classList.contains("__telegram")&&(/^@\w+([\.-]?\w+)$/.test(o.value)||(d(o),t++))}return t}(s),t=new FormData(s);if(e<=4){const a=document.querySelector(".modal-call-to-action__container");a.classList.add("modal-call-to-action__container--sending");let e=await fetch("sendmail.php",{method:"POST",body:t});e.ok?(t=await e.json(),alert(t.message),formPreview.innerHTML="",s.reset()):alert("Ошибка отправки!js"),a.classList.remove("modal-call-to-action__container--sending")}else{const o=document.querySelector(".page__modal-error"),l=document.querySelector(".modal-error__button"),n=document.querySelector(".modal-error__toggle-box, .modal-error__toggle");o.classList.remove("visually-hidden"),n.addEventListener("click",function(e){e.preventDefault(),o.classList.add("visually-hidden")}),l.addEventListener("click",function(e){e.preventDefault(),o.classList.add("visually-hidden")})}})});